import{t as f,a as g,e as q}from"../chunks/BTzbGMV3.js";import{i as E}from"../chunks/CXZkj6B-.js";import{G as F,P as I,R as K,O as j,L as R,v as z,K as _,J as i,N as s,d as t,S as N,e as B}from"../chunks/DnJg7omj.js";import{s as h}from"../chunks/DfWbDI8O.js";import{b as D,i as H}from"../chunks/CZFPSGvc.js";import{e as M,i as Q}from"../chunks/BXDFihdD.js";import{A as T,d as U,p as V}from"../chunks/B7sxANWy.js";var W=f('<div slot="head"><div class="config-head svelte-169cn14"><span class="config-title svelte-169cn14"> </span> <span class="config-meta svelte-169cn14"> </span></div></div>'),X=f('<button class="generate-image svelte-169cn14">Generate fleet image</button>'),Y=f('<div slot="details"><div class="config-details svelte-169cn14"><pre style="overflow: auto;"> </pre> <div class="config-image-area svelte-169cn14"><div class="image-frame svelte-169cn14"><div class="image-placeholder svelte-169cn14">Fleet image not generated</div></div> <!></div></div></div>'),Z=f('<div class="config-card svelte-169cn14"><div></div> <!></div>'),ee=f('<h1> </h1> <div class="config-list svelte-169cn14"></div>',1);function oe(P,C){F(C,!1);let n=z([]),$=new U;Promise.all(Object.entries(Object.assign({})).map(async([c,e])=>{const d=await e(),r=d.default??d;return c.split("/").pop().replace(/\.json$/,""),{...r,images:[null,!1]}})).then(c=>{I(n,c.sort((e,d)=>{let r=e.createdAt.localeCompare(d.createdAt);return r==0&&(r=e.outputName.localeCompare(d.outputName)),r}))}),E();var w=ee(),b=K(w),L=i(b);s(b);var y=_(b,2);M(y,5,()=>t(n),Q,(c,e,d)=>{var r=Z(),k=_(i(r),2);T(k,{$$slots:{head:(x,G)=>{var l=W(),m=i(l),o=i(m),O=i(o,!0);s(o);var p=_(o,2),u=i(p);s(p),s(m),s(l),j(()=>{h(O,t(e).outputName),h(u,`${t(e).author??""} | ${t(e).createdAt??""}`)}),g(x,l)},details:(x,G)=>{var l=Y(),m=i(l),o=i(m),O=i(o,!0);s(o);var p=_(o,2),u=i(p);D(u,(a,v)=>(v.images[0]=a,N(()=>t(n))),a=>{var v;return(v=a==null?void 0:a.images)==null?void 0:v[0]},()=>[t(e)]);var J=_(u,2);{var S=a=>{var v=X();q("click",v,async()=>{var A;$.rarity.length===0&&await $.init(),(A=t(e).images[0])==null||A.replaceChildren(await V(t(e),$)),t(e).images[1]=!0,N(()=>t(n))}),g(a,v)};H(J,a=>{t(e).images[1]||a(S)})}s(p),s(m),s(l),j(a=>h(O,a),[()=>JSON.stringify(Object.fromEntries(Object.entries(t(e)).filter(([a,v])=>["id","images","active"].indexOf(a)==-1)),null,2)],B),g(x,l)}}}),s(r),g(c,r)}),s(y),j(()=>h(L,`${t(n).length??""} pending configs`)),g(P,w),R()}export{oe as component};
