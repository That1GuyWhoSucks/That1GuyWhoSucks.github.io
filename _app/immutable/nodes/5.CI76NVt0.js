import{t as f,a as c,e as q}from"../chunks/BTzbGMV3.js";import{i as E}from"../chunks/CXZkj6B-.js";import{G as F,P as I,R as K,O as j,L as R,v as z,K as _,J as s,N as t,d as i,S as N,e as B}from"../chunks/DnJg7omj.js";import{s as h}from"../chunks/DfWbDI8O.js";import{b as D,i as H}from"../chunks/CZFPSGvc.js";import{e as M,i as Q}from"../chunks/BXDFihdD.js";import{A as T,d as U,p as V}from"../chunks/CkivvjoN.js";var W=f('<div slot="head"><div class="config-head svelte-i3gein"><span class="config-title svelte-i3gein"> </span> <span class="config-meta svelte-i3gein"> </span></div></div>'),X=f('<button class="generate-image svelte-i3gein">Generate fleet image</button>'),Y=f('<div slot="details"><div class="config-details svelte-i3gein"><pre style="overflow: auto;"> </pre> <div class="config-image-area svelte-i3gein"><div class="image-frame svelte-i3gein"><div class="image-placeholder svelte-i3gein">Fleet image not generated</div></div> <!></div></div></div>'),Z=f('<div class="config-card svelte-i3gein"><div></div> <!></div>'),ee=f('<h1> </h1> <div class="config-list svelte-i3gein"></div>',1);function oe(P,C){F(C,!1);let n=z([]),$=new U;Promise.all(Object.entries(Object.assign({})).map(async([g,e])=>{const d=await e(),r=d.default??d;return g.split("/").pop().replace(/\.json$/,""),{...r,images:[null,!1]}})).then(g=>{I(n,g.sort((e,d)=>{let r=e.createdAt.localeCompare(d.createdAt);return r==0&&(r=e.outputName.localeCompare(d.outputName)),r}))}),E();var w=ee(),b=K(w),L=s(b);t(b);var y=_(b,2);M(y,5,()=>i(n),Q,(g,e,d)=>{var r=Z(),k=_(s(r),2);T(k,{$$slots:{head:(x,G)=>{var l=W(),m=s(l),o=s(m),O=s(o,!0);t(o);var p=_(o,2),u=s(p);t(p),t(m),t(l),j(()=>{h(O,i(e).outputName),h(u,`${i(e).author??""} | ${i(e).createdAt??""}`)}),c(x,l)},details:(x,G)=>{var l=Y(),m=s(l),o=s(m),O=s(o,!0);t(o);var p=_(o,2),u=s(p);D(u,(a,v)=>(v.images[0]=a,N(()=>i(n))),a=>{var v;return(v=a==null?void 0:a.images)==null?void 0:v[0]},()=>[i(e)]);var J=_(u,2);{var S=a=>{var v=X();q("click",v,async()=>{var A;$.rarity.length===0&&await $.init(),(A=i(e).images[0])==null||A.replaceChildren(await V(i(e),$)),i(e).images[1]=!0,N(()=>i(n))}),c(a,v)};H(J,a=>{i(e).images[1]||a(S)})}t(p),t(m),t(l),j(a=>h(O,a),[()=>JSON.stringify(Object.fromEntries(Object.entries(i(e)).filter(([a,v])=>["id","images","active"].indexOf(a)==-1)),null,2)],B),c(x,l)}}}),t(r),c(g,r)}),t(y),j(()=>h(L,`${i(n).length??""} pending configs`)),c(P,w),R()}export{oe as component};
